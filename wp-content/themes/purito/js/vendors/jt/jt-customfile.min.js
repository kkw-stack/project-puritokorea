class JtCustomFile{constructor(t,e){if(typeof t=="undefined")return;const n=this;n.input=t;n.fileData=new DataTransfer;n.options={prefix:"jt-customfile",inputClass:"jt-customfile__input",buttonClass:"jt-customfile__button",buttonLabel:"파일 업로드",buttonBuilder:"",listClass:"jt-customfile__list",itemClass:"jt-customfile__item",deleteClass:"jt-customfile__delete",deleteBuilder:'<i class="jt-icon"><svg width="12px" height="12px" x="0px" y="0px" viewBox="0 0 12 12" style="enable-background:new 0 0 12 12;" xml:space="preserve"><path fill="black" d="M7.4,6l2.8,2.8l-1.4,1.4L6,7.4l-2.8,2.8L1.8,8.8L4.6,6L1.8,3.2l1.4-1.4L6,4.6l2.8-2.8l1.4,1.4L7.4,6z"/></svg></i>',fileExtensions:"tiff;tif;jpg;jpeg;png;gif;bmp;webp;avif;heif;heic",fileMaxLength:10,fileMaxSize:2097152};if(typeof e!="undefined"){for(const[i,s]of Object.entries(e)){n.options[i]=s}}n.input.classList.add(n.options.inputClass);n.container=document.createElement("div");n.container.setAttribute("class",n.options.prefix);n.input.parentElement.insertBefore(n.container,n.input);n.container.appendChild(n.input);n.inner=document.createElement("div");n.inner.setAttribute("class",n.options.prefix+"__field");n.input.parentElement.insertBefore(n.inner,n.input);n.inner.appendChild(n.input);n.button=document.createElement("button");n.button.setAttribute("type","button");n.button.setAttribute("tabIndex",-1);n.button.setAttribute("class",n.options.buttonClass);n.button.innerHTML="<span>"+n.options.buttonLabel+"</span>"+n.options.buttonBuilder;n.inner.appendChild(n.button);n.list=document.createElement("div");n.list.setAttribute("class",n.options.listClass);n.container.appendChild(n.list);n.input.addEventListener("click",n.onClick.bind(n),false);n.input.addEventListener("change",n.onChange.bind(n),false)}onClick(t){var e=this;if(!e.isCount(e.getCount()))t.preventDefault()}onChange(){const e=this;const n=e.input.files;const i=n.length;if(!e.isCount(e.getCount()+i))return false;for(let t=0;t<i;t++){if(!e.isExts(n[t].name))return false;if(!e.isSize(n[t].size))return false}for(let t=0;t<i;t++){e.addFile(n[t])}e.setData()}addFile(t){const e=this;const n=t.name.substring(0,t.name.lastIndexOf("."));const i=e.getExts(t.name);let s=document.createElement("div");s.setAttribute("class",e.options.itemClass);s.innerHTML=`<span>${n.length>12?n.substring(0,12)+"...":n}.${i}</span>
                              <button type="button" class="${e.options.deleteClass}">
                                  <span class="sr-only">파일삭제</span>
                                  ${e.options.deleteBuilder}
                              </button>`;s.querySelector("button").addEventListener("click",function(t){e.removeFile(t)});e.list.appendChild(s);e.fileData.items.add(t)}removeFile(t){var e=this;const n=t.target.closest("."+e.options.listClass).children;const i=t.target.closest("."+e.options.itemClass);const s=[].indexOf.call(n,i);i.remove();e.fileData.items.remove(s);e.setData()}setData(){var t=this;t.input.files=t.fileData.files}getCount(){var t=this;return t.fileData.items.length}getExts(t){return t.substr(2+(~-t.lastIndexOf(".")>>>0)).toLowerCase()}isCount(t){var e=this;if(t>e.options.fileMaxLength){e.callAlert("최대 "+e.options.fileMaxLength+"개까지 첨부가능합니다.");e.setData();return false}return true}isExts(t){const e=this;const n=e.getExts(t);if(e.options.fileExtensions.toLowerCase().indexOf(n)<0){e.callAlert("지원하지 않는 확장자입니다.");e.setData();return false}return true}isSize(t){const e=this;if(e.options.fileMaxSize>0&&e.options.fileMaxSize<t){e.callAlert("최대 "+e.options.fileMaxSize/1024/1024+"M까지 첨부가능합니다.");e.setData();return false}return true}callAlert(t){if(typeof JT==="undefined"){alert(t)}else{JT.confirm(t)}}}