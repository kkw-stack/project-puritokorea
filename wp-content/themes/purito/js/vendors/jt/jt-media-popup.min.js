class JtMediaPopup{constructor(e,o){if(typeof e=="undefined")return;const t=this;t.el=e;t.dialog=undefined;t.options={prefix:"jt-mdp",type:"image",delegate:false,customClass:"",closeButton:true,closeBuilder:'<span class="sr-only">닫기</span><i><svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.4,12l7.1,7.1l-1.4,1.4L12,13.4l-7.1,7.1l-1.4-1.4l7.1-7.1L3.5,4.9l1.4-1.4l7.1,7.1l7.1-7.1l1.4,1.4L13.4,12z" fill="black"/></svg></i>',closeOnContentClick:false,image:{verticalFit:true,verticalFitEventListener:true},iframe:{patterns:{youtube:{index:"youtube.com/",id:"v=",src:"https://www.youtube.com/embed/%id%?autoplay=1&playsinline=1&modestbranding=1&showinfo=0&rel=0"},vimeo:{index:"vimeo.com/",id:"/",src:"https://player.vimeo.com/video/%id%?autoplay=1&playsinline=1"}}},callbacks:{beforeOpen:function(){},open:function(){},beforeClose:function(){},close:function(){}}};if(typeof o!="undefined"){for(const[i,n]of Object.entries(o)){if(typeof n==="object"&&n!==null){if(typeof t.options[i]==="object"&&t.options[i]!==null){t.options[i]={...t.options[i],...n}}else{t.options[i]=n}}else{t.options[i]=n}}}t.el.addEventListener("click",t.openPopup.bind(t),false)}openPopup(e){e.preventDefault();e.stopPropagation();const o=this;o.options.callbacks.beforeOpen();o.dialog=document.createElement("dialog");o.dialog.classList.add(o.options.prefix,`${o.options.prefix}--${o.options.type}`);o.dialog.innerHTML=`<div class="${o.options.prefix}__container">
                                      <div class="${o.options.prefix}__content">
                                          <span class="${o.options.prefix}__loading-spinner"></span>
                                      </div>
                                  </div>`;if(o.options.customClass!=""){o.dialog.classList.add(o.options.customClass)}o.dialog.addEventListener("click",function(e){o.closePopup(e)});let t=undefined;if(o.options.closeButton){t=document.createElement("button");t.classList.add(`${o.options.prefix}__close`);t.innerHTML=o.options.closeBuilder}let i=undefined;let n=undefined;if(o.options.delegate===false){i=o.el}else{if(e.target.tagName.toLowerCase()===o.options.delegate||!!e.target.closest(o.options.delegate)){i=e.target.tagName.toLowerCase()==o.options.delegate?e.target:e.target.closest(o.options.delegate)}}if(i==undefined)return;if(o.options.type=="image"){const l=i.getAttribute("href");n=document.createElement("img");n.src=l;n.style.display="none"}else if(o.options.type=="iframe"){let t=i.getAttribute("href");Object.entries(o.options.iframe.patterns).forEach(([e,o])=>{if(t.indexOf(o.index)>-1){if(o.id){if(typeof o.id==="string"){t=t.substr(t.lastIndexOf(o.id)+o.id.length,t.length)}else{t=o.id.call(o,t)}}t=o.src.replace("%id%",t);return false}});const a=document.createElement("iframe");a.src=t;a.setAttribute("frameborder","0");a.setAttribute("allowFullScreen","");n=document.createElement("div");n.classList.add(`${o.options.prefix}__iframe-scaler`);n.appendChild(a)}if(o.options.closeButton)o.dialog.querySelector(`.${o.options.prefix}__content`).appendChild(t);o.dialog.querySelector(`.${o.options.prefix}__content`).appendChild(n);document.body.appendChild(o.dialog);const s=window.scrollY;document.body.setAttribute(`${o.options.prefix}-scrolltop`,s);document.body.classList.add(`open-${o.options.prefix}`);if(document.querySelector("html").classList.contains("mobile")){document.body.style.position="fixed";document.body.style.top=`-${s}px`}gsap.fromTo(o.dialog,{autoAlpha:0},{autoAlpha:1,duration:.3,ease:"power2.out",onStart:function(){o.dialog.showModal()},onComplete:function(){if(o.options.type=="image"){imagesLoaded(o.dialog,function(){gsap.fromTo(o.dialog.querySelector(`.${o.options.prefix}__content img`),{autoAlpha:0},{autoAlpha:1,duration:.2,onStart:function(){o.dialog.querySelector(`.${o.options.prefix}__loading-spinner`).remove();o.dialog.querySelector(`.${o.options.prefix}__content img`).style.removeProperty("display")}});if(o.options.image.verticalFit){if(o.options.image.verticalFitEventListener){o.options.image.verticalFitEventListener=false;window.addEventListener("resize",o.resizeImage.bind(o),false)}o.resizeImage()}})}else if(o.options.type=="iframe"){o.dialog.querySelector(`.${o.options.prefix}__loading-spinner`).remove()}o.options.callbacks.open()}})}closePopup(e){e.preventDefault();e.stopPropagation();const o=this;if(!!o.dialog&&(!!!e.target.closest(`.${o.options.prefix}__content`)||!!e.target.closest(`.${o.options.prefix}__close`)||o.options.closeOnContentClick)){gsap.to(o.dialog,{autoAlpha:0,duration:.3,ease:"power2.out",onStart:function(){o.options.callbacks.beforeClose();if(document.querySelector("html").classList.contains("mobile")){document.body.style.removeProperty("position");document.body.style.removeProperty("top")}window.scrollTo(0,document.body.getAttribute(`${o.options.prefix}-scrolltop`));document.body.classList.remove(`open-${o.options.prefix}`)},onComplete:function(){o.dialog.close();o.dialog.remove();o.options.callbacks.close()}})}}resizeImage(){const e=this;e.dialog.querySelector("img").style.maxHeight=window.innerHeight+"px"}}