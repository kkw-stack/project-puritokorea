class JtAutocomplete{constructor(t,e){if(typeof t=="undefined")return;const o=this;o.input=t;o.focusIdx=-1;o.options={prefix:"jt-automail",inputClass:"jt-automail__input",listClass:"jt-automail__list",focusClass:"jt-automail--focus",openClass:"jt-automail--open",domain:["naver.com","hanmail.net","nate.com","gmail.com","daum.net","hotmail.com","yahoo.co.kr","paran.com","lycos.co.kr","hanmail.com","korea.com","empal.com","dreamwiz.com","yahoo.com","korea.kr"],maxLength:5};if(typeof e!="undefined"){for(const[s,n]of Object.entries(e)){o.options[s]=n}}o.input.setAttribute("autocomplete","off");o.input.setAttribute("autocapitalize","off");o.input.classList.add(o.options.inputClass);o.container=document.createElement("div");o.container.setAttribute("class",o.options.prefix);o.input.parentElement.insertBefore(o.container,o.input);o.container.appendChild(o.input);o.input.addEventListener("input",o.onInput.bind(o),false);o.input.addEventListener("keydown",o.onKeydown.bind(o),false);document.addEventListener("click",o.removeList.bind(o),false)}onInput(){const e=this;e.removeList();const o=e.input.value;if(!o||o.split("@").length-1>1){return false}e.focusIdx=-1;const s=o.split("@")[0];const n=o.toLowerCase().split("@");const i=s+(n[1]!==undefined?"@"+n[1]:"");let a=[];for(let t=0;t<e.options.domain.length;t++){if(n.length!=2){if(a.length>=e.options.maxLength){break}const l=s+"@"+e.options.domain[t];const c=l.substring(o.length);const u={value:l,label:i,autocomplete:c};a.push(u)}else{if(e.options.domain[t].indexOf(n[1])===0){if(e.options.domain[t]===n[1]){return false}if(a.length>=e.options.maxLength){break}const l=s+"@"+e.options.domain[t];const c=l.substring(o.length);const u={value:l,label:i,autocomplete:c};a.push(u)}}}if(a.length>0)e.addList(a)}onKeydown(t){const e=this;let o=document.getElementById(e.options.prefix+"-"+e.input.id);if(o){o=o.getElementsByTagName("li")}switch(t.keyCode){case 38:e.focusIdx--;e.addFocus(o);break;case 40:e.focusIdx++;e.addFocus(o);break;case 13:t.preventDefault();if(e.focusIdx>-1&&o)o[e.focusIdx].click();break;default:break}}addList(o){const s=this;let n=document.createElement("ul");n.setAttribute("id",s.options.prefix+"-"+s.input.id);n.setAttribute("class",s.options.listClass);s.container.appendChild(n);for(let e=0;e<o.length;e++){let t=document.createElement("li");t.setAttribute("data-value",o[e].value);t.innerHTML="<span>"+o[e].label+"</span>"+o[e].autocomplete;t.addEventListener("click",function(){s.input.value=this.getAttribute("data-value");s.removeList()});n.appendChild(t)}s.input.closest("."+s.options.prefix).classList.add(s.options.openClass)}removeList(){const t=this;const e=document.getElementsByClassName(t.options.listClass);for(let t=0;t<e.length;t++){e[t].parentNode.removeChild(e[t])}t.input.closest("."+t.options.prefix).classList.remove(t.options.openClass)}addFocus(t){const e=this;if(!t)return false;e.removeFocus(t);if(e.focusIdx>=t.length)e.focusIdx=0;if(e.focusIdx<0)e.focusIdx=t.length-1;t[e.focusIdx].classList.add(e.options.focusClass)}removeFocus(e){const o=this;for(let t=0;t<e.length;t++){e[t].classList.remove(o.options.focusClass)}}}